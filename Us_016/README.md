# You should use code only when you understand them  
  
**Written exclusively for Arduino Pro Mini, Nano, Uno, Mega, Mega2560, Mega2560 pro**  
  
You may download this folder to ANYWHERE YOU LIKE in your local disk, and then open your Arduino IDE.  
Select from the IDE's toolbar: Sketch -> Include Library -> Add .ZIP library... -> and select the folder named Us_016 that you have just downloaded.  
Then you can use the library of this module.  
You may like to see the examples of this library to get a better understanding on how to use this library.  
To do so, select from the IDE's toolbar: File -> Examples -> (Scroll to the bottom) and hover the library name of the module you have added to Arduino IDE just now, then you can take a look or even try uploading the examples to your Arduino board.
  
## Remarks:  
1. This library has configured some parameters to the module by default values which are based on RCJ soccer purpose.
    (The range of the sensor is default to 3069 millimeters with a resolution of 3mm.)  
2. This library provides a fast type and a normal type of the class for the module, where the fast type does not store the readings of the sensor to variables, while the normal type stores the readings of the sensor to variables, and allows the programmer to read them without updating the sensors again.  
3. When 3 or more US-016 modules are used on the same Arduino board, only 2 of them can read useful readings, while the other modules can only read garbage readings.  
  
## How to use:  
1. Constructor  
- A. Constructor of an US-016 (fast) object ` yh::rec::Us_016::Us_016_fast ( digital_pin, analog_pin, range ) `  
Syntax: `yh::rec::Us_016_fast us_016 (13, A0);` or `yh::rec::Us_016_fast us_016 (13, A0, 3);`  
The line above calls the constructor of an US-016 (fast) object.  
You should declare an object of the Us_016 (fast) type outside any any functions.  
In the `()`, first input the digital pin on the Arduino that is connected to the range pin on the US-016, then input the analog pin on the Arduino that is connected to the out pin on the US-016. Last, you can input the range of the US-016 module, either 1 for 1 meter or 3 for 3 meters. It is by default set to 3 meters, so it is optional.  
- B. Constructor of an US-016 object ` yh::rec::Us_016::Us_016 ( digital_pin, analog_pin, range ) `  
Syntax: `yh::rec::Us_016 us_016 (13, A0);` or `yh::rec::Us_016 us_016 (13, A0, 3);`  
The line above calls the constructor of an US-016 object.  
You should declare an object of the Us_016 type outside any any functions.  
In the `()`, first input the digital pin on the Arduino that is connected to the range pin on the US-016, then input the analog pin on the Arduino that is connected to the out pin on the US-016. Last, you can input the range of the US-016 module, either 1 for 1 meter or 3 for 3 meters. It is by default set to 3 meters, so it is optional.  
  
2. `void yh::rec::Us_016::begin ()` method  
Syntax: `us_016.begin();`  
This `begin()` function configures the pin modes of the pins occupied by this individual module.  
You must call this begin() in void setup () function to use this object properly.  
No arguments should be inputed when calling this function.  
  
3. `uint16_t yh::rec::Us_016::read_dist_mm ()` method  
Syntax: `uint16_t distance_read = gy521.read_dist_mm();`  
This `read_dist_mm()` function asks the module to return the distance between it and the obstacle it has detected.  
  
4. `volatile double Custom_gy521::roll, Custom_gy521::pitch, Custom_gy521::yaw` members  
These 3 members with the data type of `double` stores the current roll, pitch and yaw values of chip facing at.  
If you want to reset these values or assign a specific value to them, just type `gy521.roll = 180;` or `gy521.yaw = 0;` and so on.  
Warning: By rotating the chip in more than 1 axis at the same time will cause these values to fail.  
  
5. `volatile double Custom_gy521::corr_roll, Custom_gy521::corr_pitch, Custom_gy521::corr_yaw` members  
These 3 members with the data type of `double` stores the correction of roll, pitch and yaw values to be added to the gyroscope data collected every time the `update_gyro()` (or specific axis like `update_yaw()`) method is called.  
They stores the calibration values generated by the `cal_gyro()` (or specific axis like `cal_roll_()`) method.  
You may assign them to 0 or a value that you have achieved by previous calibrations on the same chip.  
  
6. `void Custom_gy521::cal_gyro ( sampling_amount )` method  
Syntax: `gy521.cal_gyro();` or `gy521.cal_gyro(100);`  
**ATTENTION: When gyroscope calibration is in progress, put the chip on a flat surface, hold still, until this function has exited.**  
This `cal_gyro()` function calibrates all 3-axes of gyroscope of the chip.  
This function repeats reading the gyroscope values of the 3 axes and gets a mean value to be subtracted from every time the programmer gets new gyroscope data.  
The argument `sampling_amount` tells the function how many times it should get data samples. The larger the value, the calibration is more accurate, but also more time-consuming. By default, the funciton will get 8192 data samples, so this argument is optional.  
  
7. `void Custom_gy521::update_gyro ()` method  
Syntax: `gy521.update_gyro();`  
This `update_gyro()` function updates the roll, pitch and yaw in the object.  
  
**The following methods are the 1-axis version of `cal_gyro(...)` and `update_gyro()` methods.**  
**They have the same functionality as `cal_gyro(...)` and `update_gyro()` but are a bit faster since they only need to get data of 1-axis.**  
  
8. `void Custom_gy521::cal_roll ( sampling_amount )` method  
Syntax: `gy521.cal_roll();` or `gy521.cal_roll(100);`  
**ATTENTION: When gyroscope calibration is in progress, put the chip on a flat surface, hold still, until this function has exited.**  
This `cal_roll()` function **only calibrates the x-axis of gyroscope** of the chip.  
This function repeats reading the gyroscope values of the **x-axis** and gets a mean value to be subtracted from every time the programmer gets new gyroscope data.  
The argument `sampling_amount` tells the function how many times it should get data samples. The larger the value, the calibration is more accurate, but also more time-consuming. By default, the funciton will get 8192 data samples, so this argument is optional.  
  
9. `void Custom_gy521::update_roll ()` method  
Syntax: `gy521.update_roll();`  
This `update_roll()` function **only updates the member `roll`** in the object.  
  
10. `void Custom_gy521::cal_pitch ( sampling_amount )` method  
Syntax: `gy521.cal_pitch();` or `gy521.cal_pitch(100);`  
**ATTENTION: When gyroscope calibration is in progress, put the chip on a flat surface, hold still, until this function has exited.**  
This `cal_pitch()` function **only calibrates the y-axis of gyroscope** of the chip.  
This function repeats reading the gyroscope values of the **y-axis** and gets a mean value to be subtracted from every time the programmer gets new gyroscope data.  
The argument `sampling_amount` tells the function how many times it should get data samples. The larger the value, the calibration is more accurate, but also more time-consuming. By default, the funciton will get 8192 data samples, so this argument is optional.  
  
11. `void Custom_gy521::update_pitch ()` method  
Syntax: `gy521.update_pitch();`  
This `update_pitch()` function **only updates the member `pitch`** in the object.  
  
12. `void Custom_gy521::cal_yaw ( sampling_amount )` method  
Syntax: `gy521.cal_yaw();` or `gy521.cal_yaw(100);`  
**ATTENTION: When gyroscope calibration is in progress, put the chip on a flat surface, hold still, until this function has exited.**  
This `cal_yaw()` function **only calibrates the z-axis of gyroscope** of the chip.  
This function repeats reading the gyroscope values of the **z-axis** and gets a mean value to be subtracted from every time the programmer gets new gyroscope data.  
The argument `sampling_amount` tells the function how many times it should get data samples. The larger the value, the calibration is more accurate, but also more time-consuming. By default, the funciton will get 8192 data samples, so this argument is optional.  
  
13. `void Custom_gy521::update_yaw ()` method  
Syntax: `gy521.update_yaw();`  
This `update_yaw()` function **only updates the member `yaw`** in the object.  
  
If you find any problems, please raise an issue or contact me at yhei.choi@gmail.com.  
  
**This repository is written and maintained by YH Choi,**  
**tested with hardware modules provided by CSWCSS REC**  
**and technically supported by CSWCSS REC hardware team.**